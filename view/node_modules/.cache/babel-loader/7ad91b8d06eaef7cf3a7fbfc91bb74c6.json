{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _flickity = require('flickity');\n\nvar _flickity2 = _interopRequireDefault(_flickity);\n\nvar _imagesloaded = require('imagesloaded');\n\nvar _imagesloaded2 = _interopRequireDefault(_imagesloaded);\n\nvar _ExecutionEnvironment = require('fbjs/lib/ExecutionEnvironment');\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar FlickityComponent = function (_Component) {\n  _inherits(FlickityComponent, _Component);\n\n  function FlickityComponent(props) {\n    _classCallCheck(this, FlickityComponent);\n\n    var _this = _possibleConstructorReturn(this, (FlickityComponent.__proto__ || Object.getPrototypeOf(FlickityComponent)).call(this, props));\n\n    _this.state = {\n      flickityReady: false\n    };\n    _this.carousel = null;\n    _this.flkty = null;\n    return _this;\n  }\n\n  _createClass(FlickityComponent, [{\n    key: 'componentDidUpdate',\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _props = this.props,\n          children = _props.children,\n          _props$options = _props.options,\n          draggable = _props$options.draggable,\n          initialIndex = _props$options.initialIndex,\n          reloadOnUpdate = _props.reloadOnUpdate;\n      var flickityReady = this.state.flickityReady;\n\n      if (reloadOnUpdate || !prevState.flickityReady && flickityReady) {\n        this.flkty.deactivate();\n        this.flkty.selectedIndex = initialIndex || 0;\n        this.flkty.options.draggable = draggable === undefined ? children ? children.length > 1 : false : draggable;\n        this.flkty.activate();\n      } else {\n        this.flkty.reloadCells();\n      }\n    }\n  }, {\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!_ExecutionEnvironment.canUseDOM) return null;\n      var _props2 = this.props,\n          disableImagesLoaded = _props2.disableImagesLoaded,\n          flickityRef = _props2.flickityRef,\n          options = _props2.options;\n      var carousel = this.carousel;\n      this.flkty = new _flickity2.default(carousel, options);\n\n      var setFlickityToReady = function setFlickityToReady() {\n        return _this2.setState({\n          flickityReady: true\n        });\n      };\n\n      if (disableImagesLoaded) setFlickityToReady();else (0, _imagesloaded2.default)(carousel, setFlickityToReady);\n      if (flickityRef) flickityRef(this.flkty);\n    }\n  }, {\n    key: 'renderPortal',\n    value: function renderPortal() {\n      if (!this.carousel) return null;\n      var mountNode = this.carousel.querySelector('.flickity-slider');\n      if (mountNode) return (0, _reactDom.createPortal)(this.props.children, mountNode);\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      var _this3 = this;\n\n      return _react2.default.createElement(this.props.elementType, {\n        className: this.props.className,\n        ref: function ref(c) {\n          _this3.carousel = c;\n        }\n      }, this.renderPortal());\n    }\n  }]);\n\n  return FlickityComponent;\n}(_react.Component);\n\nFlickityComponent.propTypes = {\n  disableImagesLoaded: _propTypes2.default.bool,\n  reloadOnUpdate: _propTypes2.default.bool,\n  options: _propTypes2.default.object,\n  className: _propTypes2.default.string,\n  elementType: _propTypes2.default.string,\n  children: _propTypes2.default.array,\n  flickityRef: _propTypes2.default.func\n};\nFlickityComponent.defaultProps = {\n  disableImagesLoaded: false,\n  reloadOnUpdate: false,\n  options: {},\n  className: '',\n  elementType: 'div'\n};\nexports.default = FlickityComponent;\nmodule.exports = exports.default;","map":{"version":3,"sources":["../src/index.js"],"names":["FlickityComponent","Component","flickityReady","prevProps","prevState","children","draggable","initialIndex","reloadOnUpdate","canUseDOM","disableImagesLoaded","flickityRef","options","carousel","Flickity","setFlickityToReady","mountNode","className","ref","PropTypes","elementType","func"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport Flickity from 'flickity';\nimport imagesloaded from 'imagesloaded';\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nimport PropTypes from 'prop-types';\n\nclass FlickityComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      flickityReady: false,\n    };\n\n    this.carousel = null;\n    this.flkty = null;\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const {\n      children,\n      options: { draggable, initialIndex },\n      reloadOnUpdate,\n    } = this.props;\n    const { flickityReady } = this.state;\n    if (reloadOnUpdate || (!prevState.flickityReady && flickityReady)) {\n      this.flkty.deactivate();\n      this.flkty.selectedIndex = initialIndex || 0;\n      this.flkty.options.draggable =\n        draggable === undefined\n          ? children\n            ? children.length > 1\n            : false\n          : draggable;\n      this.flkty.activate();\n    } else {\n      this.flkty.reloadCells();\n    }\n  }\n\n  componentDidMount() {\n    if (!canUseDOM) return null;\n    const { disableImagesLoaded, flickityRef, options } = this.props;\n    const carousel = this.carousel;\n    this.flkty = new Flickity(carousel, options);\n    const setFlickityToReady = () => this.setState({ flickityReady: true });\n    if (disableImagesLoaded) setFlickityToReady();\n    else imagesloaded(carousel, setFlickityToReady);\n    if (flickityRef) flickityRef(this.flkty);\n  }\n\n  renderPortal() {\n    if (!this.carousel) return null;\n    const mountNode = this.carousel.querySelector('.flickity-slider');\n    if (mountNode) return createPortal(this.props.children, mountNode);\n  }\n\n  render() {\n    return React.createElement(\n      this.props.elementType,\n      {\n        className: this.props.className,\n        ref: c => {\n          this.carousel = c;\n        },\n      },\n      this.renderPortal()\n    );\n  }\n}\n\nFlickityComponent.propTypes = {\n  disableImagesLoaded: PropTypes.bool,\n  reloadOnUpdate: PropTypes.bool,\n  options: PropTypes.object,\n  className: PropTypes.string,\n  elementType: PropTypes.string,\n  children: PropTypes.array,\n  flickityRef: PropTypes.func,\n};\n\nFlickityComponent.defaultProps = {\n  disableImagesLoaded: false,\n  reloadOnUpdate: false,\n  options: {},\n  className: '',\n  elementType: 'div',\n};\n\nexport default FlickityComponent;\n"]},"metadata":{},"sourceType":"script"}